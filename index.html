<<<<<<< HEAD
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Divergify | Organize Your Neurospicy Chaos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header>
  <nav class="nav">
    <div class="nav-left">
      <img src="assets/logo_transparent_small.png" alt="Divergify" class="nav-logo">
      <div class="nav-title">
        <span class="nav-title-main">Divergify</span>
        <span class="nav-title-sub">Neurodivergent ops center</span>
      </div>
    </div>
    <div class="nav-links">
      <a href="index.html" class="active">Home</a>
      <a href="about.html">About</a>
      <a href="app.html">The App</a>
      <a href="divergipedia.html">Divergipedia</a>
      <a href="dopamine-depot.html">Dopamine Depot</a>
      <a href="blog.html">Blog</a>
      <a href="contact.html">Contact</a>
    </div>
  </nav>
</header>

<main class="wrapper">
  <section class="hero">
    <div class="hero-grid">
      <div class="hero-left">
        <div class="hero-highlight">
          <span>‚óè</span>
          Neurodivergent brains, fully invited.
        </div>
        <h1>Organize your chaos.<br>Keep your spark.</h1>
        <p>
          Divergify is your AI-powered command center for ADHD & neurodivergent brains:
          less shame, more structure, and systems that move at your speed.
        </p>
        <div class="hero-actions">
          <a href="contact.html#beta" class="btn btn-primary">Join the beta</a>
          <a href="app.html" class="btn btn-ghost">See what the app can do</a>
        </div>
        <div class="hero-meta">
          No toxic productivity. No "just try harder."<br>
          Just tools built for brains that don't do linear.
        </div>
      </div>

      <div class="hero-right">
        <div class="hero-tag">Tin Foil Hat Mode ‚Ä¢ On</div>
        <div class="hero-character">
          <div class="character-avatar">
            <div class="character-hat"></div>
            <div class="character-face">
              <div class="character-eyes">
                <div class="eye"></div>
                <div class="eye"></div>
              </div>
              <div class="character-mouth"></div>
            </div>
            <div class="confetti">
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>
          <div class="hero-character-text">
            <h2>Academic Gremlin, PhD*</h2>
            <p>
              Your resident tinfoil-hat guide. Helps you turn "17 tabs open" into
              something vaguely resembling a plan.<br>
              <small>*Probably not accredited. Definitely invested.</small>
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-header">
      <div class="section-kicker">What Divergify actually does</div>
      <h2 class="section-title">Not another to-do list. A brain-ops system.</h2>
    </div>
    <div class="three-col">
      <div class="card">
        <h3>Organize your chaos</h3>
        <p>
          Turn idea avalanches, half-finished projects, and scattered notes into
          an ecosystem that future-you can actually navigate.
        </p>
      </div>
      <div class="card">
        <h3>Dopamine without the crash</h3>
        <p>
          Micro-wins, gentle confetti, and systems that reward showing up,
          not just finishing everything in one hyperfocus binge.
        </p>
      </div>
      <div class="card">
        <h3>AI as your co-pilot</h3>
        <p>
          Divergify pairs human brilliance with AI scaffolding so you don't
          have to hold the whole mental mess in working memory.
        </p>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-header">
      <div class="section-kicker">Start where you are</div>
      <h2 class="section-title">One click. Not twenty tabs.</h2>
    </div>
    <div class="three-col">
      <div class="card">
        <h3>Divergipedia</h3>
        <p>
          A 100-term lexicon for our kind of brain. Learn the language,
          name your patterns, and stop thinking you're "just lazy."
        </p>
        <p style="margin-top:8px;"><a href="divergipedia.html">Browse Divergipedia ‚Üí</a></p>
      </div>
      <div class="card">
        <h3>Try the beta app</h3>
        <p>
          Test-drive Divergify, track your chaos, and help us shape the tools
          that actually work in the wild.
        </p>
        <p style="margin-top:8px;"><a href="app.html">App beta details ‚Üí</a></p>
      </div>
      <div class="card">
        <h3>Dopamine Depot</h3>
        <p>
          Merch, tools, and tiny delights for neurodivergent humans who want
          practicality with a side of feral honesty.
        </p>
        <p style="margin-top:8px;"><a href="dopamine-depot.html">Visit Dopamine Depot ‚Üí</a></p>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <div>¬© <span id="year"></span> Divergify. Built for brains that don‚Äôt do beige.</div>
    <div>Legal-ish: Please don‚Äôt steal our stuff. Make your own weird.</div>
  </div>
</footer>
<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
=======
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divergify: Chaos to Superpower</title>
    <meta name="description" content="Divergify helps neurodivergent brains turn chaos into momentum with habit-hacking tools, a beta productivity app, and a Printful-powered store." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.14/dist/tailwind.min.css" integrity="sha384-3WM3WgsL5mywxm4jAgRJZXAd5hJu39i6rCyGNzcRCjSc5MiNmiRC6L6H944kaW1Y" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="assets/divergify-favicon.ico">
    <link rel="apple-touch-icon" href="assets/divergify-icon.png">
</head>
<body class="text-lg">
    <header id="top" class="hero-gradient py-12">
        <div class="container mx-auto px-4 text-center space-y-5">
            <div class="hero-logo" aria-label="Divergify logo">
                <img src="assets/divergify-logo-hero.png" alt="Divergify lime hero logo with rainbow brain" width="320" height="200">
            </div>
            <h1 class="text-4xl md:text-5xl font-bold leading-tight">Divergify: Your Neurodivergent Superpower Unleashed</h1>
            <p class="text-xl max-w-4xl mx-auto">Mission: <strong>Arm the beautifully-distractible with tools, language, and community to build the lives they were told they couldn‚Äôt.</strong> The old world‚Äôs on Windows 95‚Äîwe‚Äôre shipping quantum-level support.</p>
            <p class="text-lg uppercase tracking-wide font-semibold">Taglines: Built for brains that zig when the world zags ¬∑ Rerouting genius on detour ¬∑ Beat your baseline</p>
        </div>
    </header>

    <nav class="text-white py-4">
        <div class="container mx-auto px-4 flex flex-wrap items-center justify-between gap-4">
            <a href="/" class="nav-brand" aria-label="Divergify primary logo">
                <img class="logo" src="assets/divergify-logo-transparent.png" alt="Divergify transparent logo">
            </a>
            <div class="flex flex-wrap justify-center gap-6">
                <a href="/" class="hover:underline">Home</a>
                <a href="/app" class="hover:underline">App</a>
                <a href="/store" class="hover:underline">Store</a>
                <a href="/tip-jar" class="hover:underline">Tip Jar</a>
                <a href="/divergipedia" class="hover:underline">Divergipedia</a>
                <a href="/about" class="hover:underline">About</a>
            </div>
        </div>
    </nav>

    <section id="about" class="py-12 container mx-auto px-4">
        <h2 class="text-3xl font-bold mb-4 text-[#00466C]">Who We Are and Our Crusade</h2>
        <p class="mb-4">Hey, fellow brain-ziggers. I'm Jess, founder of Divergify‚Äîa hot mess of unmedicated ADHD, emotional overload, and zero bucks in the bank. This isn't some shiny startup; it's survival gear for neurodivergents like us. We're on a crusade to flip the script: Our brains aren't defective; they're the next evolution. Society's stuck on outdated mental software, expecting linear thinking in a zigzag world. Divergify's our buffer‚Äîtools that use smart behavioral nudges to "self-rewire" into habits that stick, without the burnout.</p>
        <p class="mb-4"><strong>Long mission:</strong> We‚Äôre building practical, privacy-first tools for ADHD and neurodivergent brains: to manage mental traffic, turn sparks into shipped work, and treat energy like the precious, creative fuel it is. We honor autonomy, dignity, and humor. We aim to be sustainable, then generous: once Divergify is stable, excess supports community projects and mutual aid.</p>
        <p class="mb-4">Our values stay tattooed on every feature: No shame, no fluff. Privacy-first (Tin Foil Hat Mode is a feature, not a meme). Momentum over perfection. Accessibility at the front door. Evidence plus lived experience. We‚Äôre a friend translating science into gritty habit hacks, not a doctor nagging you.</p>
    </section>

    <section id="features" class="py-12 bg-panel container mx-auto px-4 rounded-[32px] mt-6">
        <h2 class="text-3xl font-bold mb-4 text-[#00466C]">Features That Get You</h2>
        <ul class="list-disc pl-6 space-y-4">
            <li><strong>Integrated Calendar:</strong> Friendly heat-map blocks plus habit stacking prompts keep you shipping (no anxiety grids).</li>
            <li><strong>Map Integration:</strong> Route planning that factors in energy, safe sensory spots, and a ‚Äúrerouting genius on detour‚Äù mode.</li>
            <li><strong>Shopping List Mode:</strong> Hyper-focus lanes in stores with gentle audio nudges and ‚Äústack it with a reward‚Äù cues.</li>
            <li><strong>Beat Your Baseline Distraction Blocker:</strong> Mutes temptations, tracks wins, and tosses you rainbow confetti for momentum.</li>
            <li><strong>Scheduling Assistant:</strong> Sounds like your favorite friend (‚ÄúWater + task = win‚Äù) while respecting your bandwidth.</li>
        </ul>
        <p class="mt-4">We embed self-rewiring tactics everywhere: start micro, layer celebrations, log proof so your brain trusts the process. This is how neurospicy brains beat their baseline.</p>
    </section>

    <section id="beta-app" class="py-12 container mx-auto px-4">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
            <h2 class="text-3xl font-bold">Beta App Playground</h2>
            <p class="beta-note">Beta: Feedback welcome. Ping us with wins/bugs so we can iterate without ego.</p>
        </div>
        <div class="grid md:grid-cols-2 gap-6">
            <div class="card">
                <h3 class="text-2xl font-semibold mb-2">Integrated Calendar</h3>
                <p class="text-sm mb-3">Heat-mapped habits plus ‚Äúbeat your baseline‚Äù tiles. Stack tasks with rewards and watch momentum rise.</p>
                <div class="flex items-center justify-between mb-3">
                    <button id="prev-month" class="store-button">Prev</button>
                    <h4 id="calendar-label" class="font-semibold"></h4>
                    <button id="next-month" class="store-button">Next</button>
                </div>
                <div id="calendar-grid" aria-live="polite"></div>
                <form id="calendar-form" class="mt-4 space-y-2">
                    <input type="text" id="calendar-task" placeholder="Habit or win (e.g., 5-min sprint)" required>
                    <input type="date" id="calendar-date" required>
                    <button class="btn-lime w-full" type="submit">Log Habit Stack</button>
                </form>
                <p id="calendar-nudges" class="mt-2 text-sm text-[#0074D9]"></p>
            </div>

            <div class="card">
                <h3 class="text-2xl font-semibold mb-2">Map Integration</h3>
                <p class="text-sm mb-3">Drop energy-friendly routes, safe decompression stops, and ‚ÄúTin Foil Hat‚Äù privacy mode.</p>
                <div id="map" class="leaflet-map"></div>
                <div class="mt-4 space-y-2">
                    <input type="text" id="map-search" placeholder="Search a focus-friendly location">
                    <button class="btn-lime w-full" id="map-search-btn" type="button">Find + Pin</button>
                    <p class="text-sm text-[#0074D9]">Powered by free OpenStreetMap tiles via Leaflet‚Äîno API key required.</p>
                </div>
            </div>

            <div class="card">
                <h3 class="text-2xl font-semibold mb-2">Shopping List Mode</h3>
                <p class="text-sm mb-3">Laser lanes with habit nudges so grocery trips don‚Äôt eat your dopamine.</p>
                <form id="shopping-form" class="space-y-2">
                    <input type="text" id="shopping-item" placeholder="Add item + intention" required>
                    <button class="btn-lime w-full" type="submit">Add to Focus List</button>
                </form>
                <ul id="shopping-list" class="mt-3 space-y-2"></ul>
                <p id="shopping-nudge" class="text-sm text-[#0074D9] mt-2"></p>
            </div>

            <div class="card">
                <h3 class="text-2xl font-semibold mb-2">Beat Your Baseline Blocker</h3>
                <p class="text-sm mb-3">Pick a focus quest, block distractions, earn rainbow XP every 60 seconds.</p>
                <input type="text" id="baseline-goal" placeholder="What are we beating today?" class="mb-2">
                <div class="flex gap-2 mb-2">
                    <button class="store-button flex-1" id="baseline-start">Start Focus Wave</button>
                    <button class="store-button flex-1 bg-[#8A7CFF]" id="baseline-stop">Pause</button>
                </div>
                <p class="text-sm">Score: <span id="baseline-score">0</span> wins ¬∑ Active streak: <span id="baseline-timer">0s</span></p>
                <ul id="baseline-rewards" class="mt-3 text-sm list-disc pl-5 space-y-1"></ul>
            </div>

            <div class="card md:col-span-2">
                <h3 class="text-2xl font-semibold mb-2">Scheduling Assistant</h3>
                <p class="text-sm mb-3">Supportive friend vibes. Set reminders, get browser notifications, and log energy-friendly actions.</p>
                <form id="schedule-form" class="grid md:grid-cols-3 gap-3">
                    <input type="text" id="schedule-task" placeholder="Task (e.g., Send invoice)" required>
                    <input type="number" id="schedule-minutes" min="1" placeholder="Minutes from now" required>
                    <button class="btn-lime w-full md:w-auto" type="submit">Schedule Nudge</button>
                </form>
                <ul id="schedule-reminders" class="mt-3 space-y-2"></ul>
                <p class="text-sm text-[#0074D9] mt-2">Browser notifications need permission; we‚Äôll prompt you.</p>
            </div>
        </div>
    </section>

    <section id="blog" class="py-12 container mx-auto px-4">
        <h2 class="text-3xl font-bold mb-4">Our Blog: Raw Truths from the Frontlines</h2>
        <div class="space-y-8">
            <article class="card">
                <h3 class="text-2xl font-semibold">Meet Divergify, From Takoda‚Äôs Notebook</h3>
                <p>Hi, I‚Äôm Takoda‚Äîops brain, chaos wrangler, and the friend who reminds you your weird is the point. Divergify was born at a wobbly kitchen table where Jess and I mapped out every derailment we‚Äôd ever hidden. Instead of ‚Äúfixing‚Äù ourselves, we sketched tools that love zigzag energy: soft accountability, bold reminders, and unfussy workflows. This place exists so neurodivergent folks can stop masking and start building futures that look like them.</p>
            </article>
            <article class="card">
                <h3 class="text-2xl font-semibold">Our Mission, No Buzzwords Attached</h3>
                <p>Mission statements usually feel like press releases. Ours is a living promise: arm the beautifully-distractible with language, hardware, software, and community that treats their attention as treasure. Privacy is non-negotiable (Tin Foil Hat Mode is literal), autonomy stays intact, and humor keeps us grounded. Divergify‚Äôs success metric is simple‚Äîare you beating your baseline without burning out?</p>
            </article>
            <article class="card">
                <h3 class="text-2xl font-semibold">Why We‚Äôre Shipping a Beta App So Early</h3>
                <p>I‚Äôve worked on polished releases that wowed nobody because we waited too long to invite real brains in. This beta isn‚Äôt a stunt; it‚Äôs how we learn. The calendar, map, shopping focus lane, blocker, and scheduling buddy are all wired to collect human feedback (yours) while respecting privacy. Every nudge inside is tested on our own scatterbrained days before hitting your screen.</p>
            </article>
            <article class="card">
                <h3 class="text-2xl font-semibold">Dopamine Depot and the Mutual Aid Loop</h3>
                <p>When you snag a tee or journal from Dopamine Depot you‚Äôre not padding VC pockets‚Äîyou‚Äôre powering housing stipends for neurodivergent contractors, funding sliding-scale coaching, and keeping community care micro-grants alive. Takoda here, promising we‚Äôll publish quarterly receipts so you always know where the money flows.</p>
            </article>
            <article class="card">
                <h3 class="text-2xl font-semibold">How to Plug Into the Divergify Crew Today</h3>
                <p>Start messy. Open the beta, log a single win, DM us what felt clunky, and copy a social caption to invite a friend. I‚Äôll be in the inbox at <a href="mailto:chaoscontrol@divergify.app" class="text-[#0074D9] underline">chaoscontrol@divergify.app</a> reading every note. Divergify isn‚Äôt a product line‚Äîit‚Äôs a living lab for brains that zig. Pull up a chair.</p>
            </article>
        </div>
    </section>

    <section id="store" class="py-12 bg-panel container mx-auto px-4 rounded-[32px] mt-6">
        <h2 class="text-3xl font-bold mb-4 text-[#00466C]">Dopamine Depot: Gear Up for the Revolution</h2>
        <p class="mb-6 max-w-3xl">Dopamine Depot is Divergify‚Äôs merch + membership corner. Powered by Printful. Replace <strong>'YOUR_PRINTFUL_API_KEY'</strong> below with your real Printful key. Variant IDs default to live numbers‚Äîswap them for your actual product variant IDs so checkout hits your catalog.</p>

        <div class="store-wrapper">
            <div id="printful-products" class="grid md:grid-cols-3 gap-6"></div>

            <div class="grid md:grid-cols-2 gap-6 mt-8">
                <div class="bg-white text-[#00466C] rounded-2xl p-6">
                    <h3 class="text-2xl font-semibold mb-2">Cart</h3>
                    <ul id="cart-items" class="space-y-2"></ul>
                    <p class="mt-4 font-semibold text-lg">Total: $<span id="cart-total">0.00</span></p>
                    <button class="btn-lime w-full mt-4" id="cart-clear" type="button">Clear Cart</button>
                </div>
                <div class="bg-white text-[#00466C] rounded-2xl p-6">
                    <h3 class="text-2xl font-semibold mb-2">Quick Checkout</h3>
                    <form id="printful-checkout-form" class="store-form">
                        <label>Full Name<input type="text" name="name" required></label>
                        <label>Email<input type="email" name="email" required></label>
                        <label>Phone<input type="tel" name="phone" required></label>
                        <label>Address Line 1<input type="text" name="address1" required></label>
                        <label>Address Line 2 (optional)<input type="text" name="address2"></label>
                        <label>City<input type="text" name="city" required></label>
                        <label>State / Region<input type="text" name="state" required></label>
                        <label>Postal Code<input type="text" name="zip" required></label>
                        <label>Country Code<input type="text" name="country" value="US" required></label>
                        <button class="store-button w-full mt-2" type="submit">Submit to Printful</button>
                    </form>
                    <p class="text-sm text-[#0074D9] mt-2">Order is sent straight to Printful via API. You‚Äôll get a confirmation email from your Printful dashboard.</p>
                    <div id="store-status" class="store-status text-sm mt-2"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="social" class="py-12 container mx-auto px-4">
        <h2 class="text-3xl font-bold mb-4">Connect with Us</h2>
        <p>Join the conversation on our socials:</p>
        <ul class="list-none space-y-2">
            <li><a href="https://twitter.com/divergify" class="text-[#0074D9] hover:underline">Twitter/X: @divergify</a></li>
            <li><a href="https://instagram.com/divergify" class="text-[#0074D9] hover:underline">Instagram: @divergify</a></li>
            <li><a href="https://linkedin.com/company/divergify" class="text-[#0074D9] hover:underline">LinkedIn: Divergify</a></li>
        </ul>
        <p class="mt-4 font-semibold">Sample posts to copy-paste (tweak as needed):</p>
        <ul class="list-disc pl-6 space-y-2">
            <li>Twitter: "Neurodivergents, rise up! Divergify's here to turn your chaos into a superpower. Check our new site and join the crusade. #NeurodivergentRevolution [link to site]"</li>
            <li>Instagram: "From broke ADHD mess to building a habit-hacking empire. That's Divergify. Who's ready to rewire and thrive? üî• [site link] #ADHDSuperpower"</li>
            <li>LinkedIn: "At Divergify, we're empowering neurodivergents with tools that bridge the gap to a neurotypical world. Our behavioral nudges make habits stick. Learn more: [site link]"</li>
        </ul>
    </section>

    <footer class="text-white py-8">
        <div class="container mx-auto px-4 text-center flex flex-col items-center space-y-3 footer-logo">
            <img src="assets/divergify-logo-footer.png" alt="Divergify secondary logo">
            <p id="footer-rotator">&copy; 2025 Divergify. All rights reserved.</p>
            <div class="text-sm opacity-90 space-x-4">
              <a href="https://www.tiktok.com/@divergify.app" target="_blank" rel="noopener noreferrer" class="underline">TikTok</a>
              <!-- TODO: replace # with real Facebook page URL -->
              <a href="#" target="_blank" rel="noopener noreferrer" class="underline">Facebook</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/axios@1.7.7/dist/axios.min.js" integrity="sha384-EDhN0jgZ34rnOG0r8QwMCKj2QW2LaxhUJW6n7OroPj+zs9CYhK97avD7+kbLoEXO" crossorigin="anonymous"></script>
    <script>
        const PRINTFUL_API_KEY = 'siAZeuhXNpj01LuDxiaOZScRZ7OYDt2jxeb2fnXv';
        const fallbackProducts = [
            {
                id: 'tee',
                name: 'Superpower Tee',
                description: 'Deep-blue cotton with the rainbow brain crest and ‚ÄúNeurodivergent: The Upgrade.‚Äù Soft AF.',
                price: 25,
                image: 'assets/product-tee.png',
                variantId: 479722428,
                sku: 'DIV-TEE-NEON'
            },
            {
                id: 'subscription',
                name: 'Premium Subscription',
                description: 'All-access to habit labs, accountability pods, and priority beta invites. Billed monthly.',
                price: 9.99,
                image: 'assets/product-subscription.png',
                variantId: 479722518,
                sku: 'DIV-SUB-999'
            },
            {
                id: 'journal',
                name: 'Habit Journal',
                description: 'Analog notebook with rewiring prompts, Tin Foil Hat privacy tips, and Deep Blue dividers.',
                price: 15,
                image: 'assets/product-journal.png',
                variantId: 479722590,
                sku: 'DIV-JOURNAL'
            }
        ];
        let cart = [];

        async function loadPrintfulProducts() {
            const container = document.getElementById('printful-products');
            container.innerHTML = '<p class="col-span-full text-center">Loading Printful catalog...</p>';
            let products = fallbackProducts;
            if (PRINTFUL_API_KEY !== 'YOUR_PRINTFUL_API_KEY') {
                try {
                    const sdk = axios.create({
                        baseURL: 'https://api.printful.com',
                        headers: { 'Authorization': `Bearer ${PRINTFUL_API_KEY}` }
                    });
                    const response = await sdk.get('/store/products');
                    if (response.data && response.data.result && response.data.result.length) {
                        products = response.data.result.slice(0, 3).map((item, idx) => ({
                            id: item.id || fallbackProducts[idx]?.id || `prod-${idx}`,
                            name: item.name || fallbackProducts[idx]?.name,
                            description: item.description || fallbackProducts[idx]?.description,
                            price: Number(item.retail_price) || fallbackProducts[idx]?.price,
                            image: (item.thumbnail_url || fallbackProducts[idx]?.image),
                            variantId: item.sync_variants?.[0]?.id || fallbackProducts[idx]?.variantId,
                            sku: item.sync_variants?.[0]?.sku || fallbackProducts[idx]?.sku
                        }));
                    }
                } catch (error) {
                    console.warn('Printful API fallback engaged:', error);
                }
            }
            container.innerHTML = '';
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'bg-white text-[#00466C] rounded-2xl p-6 flex flex-col';
                card.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="rounded-xl mb-4 object-cover h-48 w-full" onerror="this.style.display='none'">
                    <h3 class="text-xl font-semibold">${product.name}</h3>
                    <p class="text-sm mt-2 flex-1">${product.description}</p>
                    <p class="text-lg font-semibold mt-4">$${product.price.toFixed(2)}</p>
                    <button class="store-button mt-4" data-id="${product.id}">Add to Cart</button>
                `;
                card.querySelector('button').addEventListener('click', () => addToCart(product));
                container.appendChild(card);
            });
        }

        function addToCart(product) {
            const existing = cart.find(item => item.id === product.id);
            if (existing) existing.quantity += 1;
            else cart.push({ ...product, quantity: 1 });
            renderCart();
        }

        function renderCart() {
            const list = document.getElementById('cart-items');
            const totalSpan = document.getElementById('cart-total');
            list.innerHTML = '';
            let total = 0;
            cart.forEach(item => {
                total += item.price * item.quantity;
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span>${item.name} √ó ${item.quantity}</span>
                        <div class="flex gap-2 items-center">
                            <button aria-label="Decrease" class="store-button px-2" data-action="dec">-</button>
                            <button aria-label="Increase" class="store-button px-2" data-action="inc">+</button>
                            <button aria-label="Remove" class="store-button bg-[#FF6B6B] px-2" data-action="remove">x</button>
                        </div>
                    </div>`;
                li.querySelector('[data-action="dec"]').addEventListener('click', () => updateQuantity(item.id, -1));
                li.querySelector('[data-action="inc"]').addEventListener('click', () => updateQuantity(item.id, 1));
                li.querySelector('[data-action="remove"]').addEventListener('click', () => removeFromCart(item.id));
                list.appendChild(li);
            });
            totalSpan.textContent = total.toFixed(2);
        }

        function updateQuantity(id, delta) {
            const item = cart.find(prod => prod.id === id);
            if (!item) return;
            item.quantity += delta;
            if (item.quantity <= 0) removeFromCart(id);
            renderCart();
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            renderCart();
        }

        async function handleCheckout(event) {
            event.preventDefault();
            const status = document.getElementById('store-status');
            if (cart.length === 0) {
                status.textContent = 'Add at least one item before checking out.';
                status.style.color = '#FF6B6B';
                return;
            }
            const data = Object.fromEntries(new FormData(event.target).entries());
            status.textContent = 'Submitting order to Printful...';
            status.style.color = '#0074D9';

            const payload = {
                recipient: {
                    name: data.name,
                    email: data.email,
                    phone: data.phone,
                    address1: data.address1,
                    address2: data.address2,
                    city: data.city,
                    state_code: data.state,
                    zip: data.zip,
                    country_code: data.country
                },
                items: cart.map(item => ({
                    variant_id: item.variantId,
                    quantity: item.quantity,
                    name: item.name,
                    retail_price: item.price.toFixed(2),
                    sku: item.sku
                }))
            };

            if (PRINTFUL_API_KEY === 'YOUR_PRINTFUL_API_KEY') {
                status.textContent = 'Replace YOUR_PRINTFUL_API_KEY with your actual key from Printful before running live orders.';
                status.style.color = '#FF6B6B';
                return;
            }

            try {
                const response = await fetch('https://api.printful.com/orders', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${PRINTFUL_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (!response.ok) throw new Error(result.error || 'Unknown Printful error');
                status.textContent = `Order sent! Printful ID: ${result.result?.id || 'Check dashboard'}`;
                status.style.color = '#8BC34A';
                cart = [];
                renderCart();
                event.target.reset();
            } catch (error) {
                status.textContent = `Printful error: ${error.message}`;
                status.style.color = '#FF6B6B';
            }
        }

        document.getElementById('printful-checkout-form').addEventListener('submit', handleCheckout);
        document.getElementById('cart-clear').addEventListener('click', () => { cart = []; renderCart(); });
        loadPrintfulProducts();

        const calendarState = {
            current: new Date(),
            events: {}
        };
        const shoppingState = [];
        let baselineTimer = null;
        let baselineSeconds = 0;
        let baselineScore = 0;
        const scheduleQueue = [];

        function renderCalendar() {
            const label = document.getElementById('calendar-label');
            const grid = document.getElementById('calendar-grid');
            const month = calendarState.current.getMonth();
            const year = calendarState.current.getFullYear();
            label.textContent = calendarState.current.toLocaleDateString(undefined, { month: 'long', year: 'numeric' });
            grid.innerHTML = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].map(d => `<div class="text-sm font-semibold text-center text-[#0074D9]">${d}</div>`).join('');
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            for (let i = 0; i < firstDay; i++) grid.innerHTML += '<div></div>';
            for (let day = 1; day <= daysInMonth; day++) {
                const dateKey = `${year}-${String(month + 1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
                const logs = calendarState.events[dateKey] || [];
                const entries = logs.map(item => `<span class="text-xs block">‚Ä¢ ${item}</span>`).join('');
                grid.innerHTML += `<div><strong>${day}</strong>${entries || '<span class="text-xs text-gray-400">Open slot</span>'}</div>`;
            }
        }

        document.getElementById('prev-month').addEventListener('click', () => {
            calendarState.current.setMonth(calendarState.current.getMonth() - 1);
            renderCalendar();
        });
        document.getElementById('next-month').addEventListener('click', () => {
            calendarState.current.setMonth(calendarState.current.getMonth() + 1);
            renderCalendar();
        });
        document.getElementById('calendar-form').addEventListener('submit', event => {
            event.preventDefault();
            const task = document.getElementById('calendar-task').value.trim();
            const date = document.getElementById('calendar-date').value;
            if (!task || !date) return;
            if (!calendarState.events[date]) calendarState.events[date] = [];
            calendarState.events[date].push(task);
            document.getElementById('calendar-task').value = '';
            document.getElementById('calendar-date').value = '';
            document.getElementById('calendar-nudges').textContent = 'Logged! Stack it with hydration or a 5-min groove.';
            renderCalendar();
        });
        renderCalendar();

        let leafletMap;
        let searchMarker;
        function initLeafletMap() {
            leafletMap = L.map('map', { center: [40.7128, -74.0060], zoom: 12 });
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(leafletMap);
        }
        function searchLeafletLocation(query) {
            fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`)
                .then(resp => resp.json())
                .then(results => {
                    if (!results.length) return;
                    const { lat, lon, display_name } = results[0];
                    leafletMap.setView([lat, lon], 14);
                    if (searchMarker) leafletMap.removeLayer(searchMarker);
                    searchMarker = L.marker([lat, lon]).addTo(leafletMap).bindPopup(`Focus spot: ${display_name}`).openPopup();
                });
        }
        document.getElementById('map-search-btn').addEventListener('click', () => {
            const query = document.getElementById('map-search').value.trim();
            if (!query) return;
            if (!leafletMap) initLeafletMap();
            searchLeafletLocation(query);
        });
        initLeafletMap();

        document.getElementById('shopping-form').addEventListener('submit', event => {
            event.preventDefault();
            const value = document.getElementById('shopping-item').value.trim();
            if (!value) return;
            shoppingState.push({ text: value, checked: false });
            document.getElementById('shopping-item').value = '';
            renderShoppingList();
            const nudges = [
                'Pair it with a voice memo recap.',
                'Reward yourself with a citrus gummy after checkout.',
                'Do it while you‚Äôre already moving‚Äîstack the win.'
            ];
            document.getElementById('shopping-nudge').textContent = nudges[Math.floor(Math.random() * nudges.length)];
        });

        function renderShoppingList() {
            const list = document.getElementById('shopping-list');
            list.innerHTML = '';
            shoppingState.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'flex items-center justify-between bg-[#F4F7FA] rounded-lg px-3 py-2';
                li.innerHTML = `
                    <span class="${item.checked ? 'line-through text-gray-400' : ''}">${item.text}</span>
                    <div class="flex gap-2">
                        <button class="store-button px-2" data-action="toggle">Done</button>
                        <button class="store-button bg-[#FF6B6B] px-2" data-action="remove">x</button>
                    </div>`;
                li.querySelector('[data-action="toggle"]').addEventListener('click', () => {
                    shoppingState[index].checked = !shoppingState[index].checked;
                    renderShoppingList();
                });
                li.querySelector('[data-action="remove"]').addEventListener('click', () => {
                    shoppingState.splice(index, 1);
                    renderShoppingList();
                });
                list.appendChild(li);
            });
        }

        document.getElementById('baseline-start').addEventListener('click', () => {
            const goal = document.getElementById('baseline-goal').value.trim() || 'Deep focus';
            if (baselineTimer) clearInterval(baselineTimer);
            baselineSeconds = 0;
            document.getElementById('baseline-rewards').innerHTML = '';
            baselineTimer = setInterval(() => {
                baselineSeconds += 1;
                document.getElementById('baseline-timer').textContent = `${baselineSeconds}s`;
                if (baselineSeconds % 60 === 0) {
                    baselineScore += 1;
                    document.getElementById('baseline-score').textContent = baselineScore;
                    const li = document.createElement('li');
                    li.textContent = `Minute ${baselineSeconds / 60}: ${goal} streak! Celebrate with shoulder roll + breath.`;
                    document.getElementById('baseline-rewards').appendChild(li);
                }
            }, 1000);
        });
        document.getElementById('baseline-stop').addEventListener('click', () => {
            if (baselineTimer) clearInterval(baselineTimer);
        });

        function ensureNotificationPermission() {
            if (!('Notification' in window)) return;
            if (Notification.permission === 'default') Notification.requestPermission();
        }
        ensureNotificationPermission();

        document.getElementById('schedule-form').addEventListener('submit', event => {
            event.preventDefault();
            const task = document.getElementById('schedule-task').value.trim();
            const minutes = parseInt(document.getElementById('schedule-minutes').value, 10);
            if (!task || !minutes || minutes <= 0) return;
            const due = Date.now() + minutes * 60 * 1000;
            scheduleQueue.push({ task, due });
            renderScheduleList();
            const timeout = setTimeout(() => triggerNotification(task), minutes * 60 * 1000);
            scheduleQueue[scheduleQueue.length - 1].timeout = timeout;
            event.target.reset();
        });

        function renderScheduleList() {
            const list = document.getElementById('schedule-reminders');
            list.innerHTML = '';
            scheduleQueue.forEach((item, index) => {
                const li = document.createElement('li');
                const minutesLeft = Math.max(0, Math.round((item.due - Date.now()) / 60000));
                li.className = 'flex items-center justify-between bg-[#F4F7FA] rounded-lg px-3 py-2';
                li.innerHTML = `<span>${item.task} ¬∑ ${minutesLeft}m left</span>
                                <button class="store-button px-2" data-index="${index}">Cancel</button>`;
                li.querySelector('button').addEventListener('click', () => cancelReminder(index));
                list.appendChild(li);
            });
        }

        function triggerNotification(task) {
            const message = `${task}: Beat your baseline with a 2-min start!`;
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Divergify Scheduling Assistant', { body: message });
            } else {
                alert(message);
            }
        }

        function cancelReminder(index) {
            const reminder = scheduleQueue[index];
            if (reminder?.timeout) clearTimeout(reminder.timeout);
            scheduleQueue.splice(index, 1);
            renderScheduleList();
        }
    </script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-VuNyxNybCwR6JwA4J3QoaZySUdkc5kOcZPwS4JoqJ80=" crossorigin=""></script>
    <script>
      // Rotating footer messages (every 15 seconds)
      (function(){
        const messages = [
          "For brains that zig, stall, reboot, and still show up.",
          "Powered by dopamine, defiance, and naps.",
          "Local-first. Your brain crumbs are not for sale.",
          "Built for the neurospicy, not the neatly aligned.",
          "One tiny win still counts. Especially here.",
          "Momentum over perfection ‚Äî always.",
          "Privacy first. Tin Foil Hat Mode is a feature.",
          "Rerouting genius on detour.",
          "Beat your baseline, not yourself.",
          "Ship small. Iterate. Celebrate."
        ];
        let i = 0; const el = document.getElementById('footer-rotator'); if(!el) return;
        function tick(){ el.textContent = messages[i++ % messages.length]; }
        tick(); setInterval(tick, 15000);
      })();
    </script>
>>>>>>> 1850ab0 (Restructure site: nav tabs, store link, new pages, rotating footer; add TikTok & Facebook links; logo + buttons cleanup)
</body>
</html>
